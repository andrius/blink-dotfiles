FROM alpine:3 as build

WORKDIR /root

RUN apk --no-cache add curl

ARG VERSION=1.20.0
ARG TARGETPLATFORM

RUN curl -LO "https://storage.googleapis.com/kubernetes-release/release/v${VERSION}/bin/${TARGETPLATFORM}/kubectl"
RUN chmod +x kubectl

FROM alpine:3
LABEL maintainer="Tine <mentos1386> Jozelj <tine@tjo.space>"
LABEL org.opencontainers.image.source https://github.com/mentos1386/workspace

COPY --from=build /root/kubectl /usr/local/bin/kubectl

ENTRYPOINT /usr/local/bin/kubectl

