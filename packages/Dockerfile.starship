FROM rust:1 as build

WORKDIR /usr/src/starship

ARG VERSION=0.47.0

RUN git clone https://github.com/starship/starship.git \
    --branch v$VERSION \
    --depth 1 .
RUN cargo build --release
RUN strip target/release/starship

FROM scratch AS binaries
LABEL maintainer="Tine <mentos1386> Jozelj <tine@tjo.space>"
LABEL org.opencontainers.image.source https://github.com/mentos1386/workspace

COPY --from=build /usr/src/starship/target/release/starship /

